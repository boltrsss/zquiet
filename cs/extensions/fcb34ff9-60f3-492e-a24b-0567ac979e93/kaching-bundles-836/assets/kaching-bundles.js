!function(){"use strict";const t=(()=>{try{const t="kaching_local_storage_test";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}})()?window.localStorage:window.sessionStorage,n=()=>new URLSearchParams(window.location.search).get("kaching");let e;let i;const o=()=>(void 0===i&&(i="debug"===n()),i);let s;const r=async(n,e,i,o,s)=>{try{const r="kaching_visited_deal_blocks",a=t.getItem(r),c=a?JSON.parse(a):[];if(c.includes(e))return;c.push(e),t.setItem(r,JSON.stringify(c));const u=`${"https://kaching-bundles-stats-50cc8a504c1c.herokuapp.com"}/impressions`;await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopDomain:n,dealBlockId:e,productId:i,abTestVariantId:o,sessionId:s})})}catch(r){console.error(r)}},a=async(t,n={},e=1)=>{if(Math.random()>e)return;l("sendStorefrontEvent",{name:t,data:n});const i=window.location.href;return await fetch("https://storefront-events-25baffeb7686.herokuapp.com/popup/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:{name:t,data:n,url:i,shop:window.Shopify.shop}})})},c=async(t,n,e,i=.1)=>{if(Math.random()>i)return;if("Failed to fetch"===n)return;const o=window.location.href,s=window.Shopify.shop;return await fetch("https://storefront-events-25baffeb7686.herokuapp.com/bundles/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:{filename:t,message:n,stack:e,url:o,shop:s}})})},u=()=>{const t=["kaching-bundles.js","kaching-bundles-block.js"];window.addEventListener("error",(async function(n){try{await(async n=>{const{filename:e,message:i,error:s}=n;for(const r of t)if(e.includes(r)){if(o()||I())return void l("Error",n);await c(e,i,s.stack)}})(n)}catch(e){console.error(e)}})),window.addEventListener("unhandledrejection",(async function(n){try{await(async n=>{if("object"!=typeof n.reason)return;const{message:e,stack:i}=n.reason;if(i)for(const s of t)if(i.includes(s)){if(o()||I())return void l("Unhandled rejection",n);await c(s,e,i)}})(n)}catch(e){console.error(e)}}))};function l(t,e=null){(o()||(void 0===s&&(s="dev"===n()),s))&&console.debug("[Kaching Bundles]",t,e)}const d=()=>{const t=t=>{window.dispatchEvent(new Event(t))},n=history.pushState;history.pushState=function(...e){const i=n.apply(this,e);return t("pushstate"),t("locationchange"),i};const e=history.replaceState;history.replaceState=function(...n){const i=e.apply(this,n);return t("replacestate"),t("locationchange"),i},m(window,"popstate",(()=>{t("locationchange")}))},h=(t,n,e,i=0)=>{const o=Object.getPrototypeOf(t);if(o.hasOwnProperty(n)){const s=Object.getOwnPropertyDescriptor(o,n);if(!s.configurable)return;Object.defineProperty(t,n,{configurable:!0,get:function(...t){return s.get.apply(this,t)},set:function(...t){const o=this[n];s.set.apply(this,t);const r=this[n];return"function"==typeof e&&setTimeout(e.bind(this,o,r),i),r}})}},p=(t,n=document.body)=>{try{return n.querySelector(t)}catch(e){return null}},f=(t,n=document.body)=>{try{return[...n.querySelectorAll(t)]}catch(e){return[]}},m=(t,n,e)=>t.addEventListener(n,e),w=t=>document.createElement(t),y=(t,n,e)=>t.setAttribute(n,e),_=t=>t.dataset,b=t=>{const n=p(t);if(!n)return;const e=JSON.parse(n.textContent);return l("jsonFromElement",e),e},g=(t,n)=>{let e=0,i=t;for(;i!==n&&i!==document.body;)e++,i=i.parentNode;if(i!==n)throw new Error("The specified child node is not a descendant of the parent node.");return e},v=(t,n)=>{const e=new Range;return e.setStart(t,0),e.setEnd(n,0),e.collapsed&&(e.setStart(n,0),e.setEnd(t,0)),e.commonAncestorContainer},k=(t,n,e=1/0)=>{let i=null,o=1/0;for(const s of n){const n=v(t,s),r=g(t,n);r>e||r<o&&(i=s,o=r)}return i},I=()=>{const t=document.currentScript;if(!t)return!1;return t.src.includes("kaching-bundles-dev")},P=(t,n={})=>{const e=window.Shopify.routes,i=(e&&e.root||"/")+t,o=new URLSearchParams;for(const[r,a]of Object.entries(n))o.append(r,a);const s=o.toString();return s?`${i}?${s}`:i},S=(t,n)=>{new MutationObserver(((e,i)=>{for(const o of e)"childList"===o.type&&o.removedNodes.forEach((e=>{e.contains(t)&&(i.disconnect(),n())}))})).observe(document.body,{childList:!0,subtree:!0})},C=[['[data-icon="gpicon-product-cartbutton"]','[data-icon="gpicon-product-quantity"]'],["gp-product-button","gp-product-quantity"],["product-form",".product-form__quantity"],['[data-pf-type="ProductATC"]','[data-pf-type="ProductQuantity"]'],[".product-form__item--submit",'label[for="Quantity-product-template"]'],[".product-single__add-to-cart",".product-single__quantity"],[".product-info__buy-buttons",".product-info__quantity-selector"],[".ProductForm__BuyButtons, .ProductForm__AddToCart",".ProductForm__QuantitySelector"],['[data-block-type="buy-buttons"]','[data-block-type="quantity-selector"]'],[".product-page--submit-action",".quantity-controls__outer"],[".product-form__payment-container",".product-form__info-item--quantity"],["[data-product-submit]",".product-quantity-input"],[".product-form--atc",".product-form--atc-qty"],[".purchase-details",".purchase-details__quantity"],[".product-single__form .payment-buttons",".product__quantity"],[".product-form--wide",".product-single__quantity"],[".product-single__add-to-cart",".product-single__quantity"],[".product-form--button-container",null],[".product-form__item--submit",".product-form__item--quantity"],[".product-detail__form__action",null],[".product__submit__buttons",null],[".buy-buttons-row",".quantity-wrapper"],[".t4s-product-form__buttons","[data-quantity-wrapper]"],[".qty-wrapper--with-payment-button",".product-qty"],[".shopify-product-form",".product-quantity-block"],[".shopify-product-form",".product-block-quantity-selector"],[".type_buy_buttons",".type_quantity_selector"],[".product-single__form .add-to-cart",".product__quantity"],[".purchase-section",".quantity.form"],[".product-form__buttons",".quantity_selector"],[".product__atc",".quantity--input"],[".product-form__payment-container",".quantity-selector"],[".ecom-product-single__add-to-cart",".ecom-product-single__quantity"],[".product-form__submit",".product__quantity"],[".product-info__add-to-cart","quantity-input"],[".yv-checkout-btn",".yv-product-quantity"],[".product-add-to-cart-container","quantity-selector"],[".product__block__buttons",".product__block__quantity"],["x-buy-button","x-quantity-input"],['[data-instant-action-type="redirect-to-cart"]','[data-instant-type="container"]:has(> .instant-quantity-input)']];class T extends Error{constructor(t){super(t),this.name="CartFetchError"}}const q="kaching_session_id",N=()=>{const n=new URL(window.location.href),e=new URLSearchParams(n.search).get("preview_kaching_session_id");e&&t.setItem(q,e)},A=()=>t.getItem(q)||$(),$=()=>{const n=V();return t.setItem(q,n),n},V=()=>"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():x(),x=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(t=>(+t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+t/4).toString(16))),F=async()=>{const t=await fetch(P("cart.js"));if(!t.ok)throw new T("Failed to fetch cart");return(await t.json()).attributes.__kaching_session_id},O=async t=>{const n=new FormData;n.append("attributes[__kaching_session_id]",t);const e=await fetch(P("cart/update.js"),{method:"POST",body:n});return await e.json()},B=(t,n)=>{const e=t.slice(-1);return parseInt(e,16)%n+1};class j{constructor(t,n,e,i,o){if(l("AddToCartForm",[t]),this.t=t,this.i=n,this.o=e,this.u=i,o){this.l("properties[__kaching_session_id]").value=A()}}update(t){l("AddToCartForm#update",[this.t,t]),this.h(t.id),this.p(t.quantity),this.m(t.properties),this._(t.selling_plan)}currentVariantId(){const t=this.v("id");if(t)return Number(t.value)}h(t){const n=this.l("id");n.disabled=!1,n.value=String(t)}p(t){l("AddToCartForm#_updateQuantityInput",t);let n=null;n=this.o?this.l("quantity"):this.v("quantity"),n&&(n.disabled=!1,n.value=String(t))}m(t){var n,e;if(t.__kaching_bundles){const i=this.l("properties[__kaching_bundles]");let o=t.__kaching_bundles;const s=null==(e=null==(n=window.Shopify.theme)?void 0:n.schema_name)?void 0:e.toLowerCase();(null==s?void 0:s.startsWith("shrine pro"))&&(o=btoa(o)),i.value=o}else{const t=this.v("properties[__kaching_bundles]");null==t||t.remove()}}_(t){if(this.u)if(t){this.l("selling_plan").value=String(t)}else{const t=this.v("selling_plan");null==t||t.remove()}}l(t){return this.v(t)||this.k(t)}v(t){return p(`[name="${t}"]`,this.t)}k(t){const n=w("input");return n.type="hidden",n.name=t,this.t.prepend(n),n}}const D=async({storefrontAccessToken:t,query:n,variables:e={},country:i})=>{const o=await fetch(`https://${window.Shopify.shop}/api/2025-01/graphql.json`,{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":t},body:JSON.stringify({query:n,variables:e})});let s=null;try{if(s=await o.text(),!s)throw new Error("Empty graphql response");const t=JSON.parse(s);return setTimeout((()=>{if(i){const n=t.extensions.context.country;n!==i&&a("countries_mismatch",{country:i,countryFromResponse:n},.1)}})),t.data}catch(r){throw a("storefront_graphql_error",{status:o.status,body:s}),r}},E="\n  id\n  availableForSale\n  price {\n    amount\n  }\n  compareAtPrice {\n    amount\n  }\n  selectedOptions {\n    name\n    value\n  }\n  image {\n    id\n    url(transform: { maxWidth: 200, maxHeight: 200 })\n  }\n  unitPriceMeasurement {\n    quantityUnit\n    quantityValue\n    referenceUnit\n    referenceValue\n  }\n",G=async({storefrontAccessToken:t,country:n,language:e,productIds:i,removeUnavailableVariants:o=!1,includeSellingPlans:s=!1})=>{const r=i.map((t=>`gid://shopify/Product/${t}`));let a=(await D({storefrontAccessToken:t,query:`\n      query($productGIDs: [ID!]!, $includeSellingPlans: Boolean!) @inContext(country: ${n}, language: ${e}) {\n        nodes(ids: $productGIDs) {\n          ... on Product {\n            id\n            handle\n            onlineStoreUrl\n            availableForSale\n            title\n            featuredImage {\n              url\n            }\n            options {\n              name\n              optionValues {\n                id\n                name\n                swatch {\n                  color\n                  image {\n                    previewImage {\n                      url(transform: { maxWidth: 200, maxHeight: 200 })\n                    }\n                  }\n                }\n              }\n            }\n            variants(first: 250) {\n              nodes {\n                ${E}\n              }\n            }\n            collections(first: 50) {\n              nodes {\n                id\n              }\n            }\n            metafield: metafield(namespace: "$app:kaching_bundles", key: "text") {\n              value\n            }\n            metafield2: metafield(namespace: "$app:kaching_bundles", key: "text2") {\n              value\n            }\n            metafield3: metafield(namespace: "$app:kaching_bundles", key: "text3") {\n              value\n            }\n            metafield4: metafield(namespace: "$app:kaching_bundles", key: "text4") {\n              value\n            }\n            legacy_metafield_text: metafield(namespace: "kaching_bundles", key: "text") {\n              value\n            }\n            legacy_metafield_text2: metafield(namespace: "kaching_bundles", key: "text2") {\n              value\n            }\n            sellingPlanGroups(first: 100) @include(if: $includeSellingPlans) {\n              nodes {\n                sellingPlans(first: 100) {\n                  nodes {\n                    id\n                    name\n                    priceAdjustments {\n                      adjustmentValue {\n                        __typename\n                        ... on SellingPlanPercentagePriceAdjustment {\n                          adjustmentPercentage\n                        }\n                        ... on SellingPlanFixedAmountPriceAdjustment {\n                          adjustmentAmount {\n                            amount\n                          }\n                        }\n                        ... on SellingPlanFixedPriceAdjustment {\n                          price {\n                            amount\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    `,variables:{productGIDs:r,includeSellingPlans:s},country:n})).nodes.filter((t=>null!=t));return a=await Promise.all(a.map((n=>J(t,n)))),a.map((t=>U(t,o)))},J=async(t,n)=>{if(n.variants.nodes.length<250)return n;const e=new Set,i=[],o=[],s=async s=>{let r=!0,a=null;for(;r;){const c=await D({storefrontAccessToken:t,query:`\n          query($productGID: ID!, $cursor: String, $reverse: Boolean) {\n            product(id: $productGID) {\n              variants(first: 250, after: $cursor, reverse: $reverse) {\n                nodes {\n                  ${E}\n                }\n                pageInfo {\n                  endCursor\n                  hasNextPage\n                }\n              }\n            }\n          }\n        `,variables:{productGID:n.id,cursor:a,reverse:s}}),{nodes:u,pageInfo:l}=c.product.variants;for(const t of u){if(e.has(t.id)){r=!1;break}e.add(t.id),s?o.push(t):i.push(t)}l.hasNextPage||(r=!1),a=l.endCursor}};return await Promise.all([s(!1),s(!0)]),n.variants.nodes=[...i,...o.reverse()],l("fetchAllVariantsForProduct",{productId:n.id,variants:n.variants.nodes.length}),a("2048_variants",{variants:n.variants.nodes.length}),n},U=(t,n)=>{var e,i,o,s,r,a,c,u;let l=t.variants.nodes.map((({unitPriceMeasurement:t,...n})=>{var e,i,o;return{id:Number(n.id.split("/").pop()),availableForSale:n.availableForSale,price:Math.round(100*Number(n.price.amount)),compareAtPrice:n.compareAtPrice?Math.round(100*Number(n.compareAtPrice.amount)):null,options:n.selectedOptions.map((t=>t.value)),imageId:n.image?Number(n.image.id.split("/").pop()):null,image:(null==(e=n.image)?void 0:e.url)||null,unitPriceQuantityValue:(null==t?void 0:t.quantityValue)||null,unitPriceQuantityUnit:(null==(i=null==t?void 0:t.quantityUnit)?void 0:i.toLowerCase())||null,unitPriceReferenceValue:(null==t?void 0:t.referenceValue)||null,unitPriceReferenceUnit:(null==(o=null==t?void 0:t.referenceUnit)?void 0:o.toLowerCase())||null}}));if(n){const t=l.filter((t=>t.availableForSale));t.length>0&&(l=t)}const d=t.options.map(((t,n)=>{const e=t.optionValues.map((t=>{var n,e,i,o;return{id:Number(t.id.split("/").pop()),defaultName:t.name,name:t.name,swatch:{color:(null==(n=t.swatch)?void 0:n.color)||null,image:(null==(o=null==(i=null==(e=t.swatch)?void 0:e.image)?void 0:i.previewImage)?void 0:o.url)||null}}}));return{defaultName:t.name,name:t.name,position:n+1,optionValues:M(e,n,l)}})),h=(null==(e=t.sellingPlanGroups)?void 0:e.nodes.flatMap((t=>t.sellingPlans.nodes.map((t=>({id:Number(t.id.split("/").pop()),name:t.name,priceAdjustments:t.priceAdjustments.map((t=>{const n=t.adjustmentValue;switch(n.__typename){case"SellingPlanPercentagePriceAdjustment":return{type:"percentage",value:n.adjustmentPercentage};case"SellingPlanFixedAmountPriceAdjustment":return{type:"fixed_amount",value:100*Number(n.adjustmentAmount.amount)};case"SellingPlanFixedPriceAdjustment":return{type:"price",value:100*Number(n.price.amount)};default:throw new Error(`Unknown price adjustment type: ${n.__typename}`)}}))}))))))||[];return{id:Number(t.id.split("/").pop()),url:t.onlineStoreUrl,availableForSale:t.availableForSale,title:t.title,image:(null==(i=t.featuredImage)?void 0:i.url)||null,collectionIds:t.collections.nodes.map((t=>Number(t.id.split("/").pop()))),options:d,selectedVariantId:Number(t.variants.nodes[0].id.split("/").pop()),variants:l,sellingPlans:h,metafields:{text:(null==(o=t.metafield)?void 0:o.value)||null,text2:(null==(s=t.metafield2)?void 0:s.value)||null,text3:(null==(r=t.metafield3)?void 0:r.value)||null,text4:(null==(a=t.metafield4)?void 0:a.value)||null},legacyMetafields:{kaching_bundles:{text:(null==(c=t.legacy_metafield_text)?void 0:c.value)||null,text2:(null==(u=t.legacy_metafield_text2)?void 0:u.value)||null}}}},M=(t,n,e)=>t.filter((t=>e.filter((e=>e.options[n]===t.name)).length>0)),R=t=>{const n=t.options.map(((t,n)=>({defaultName:t.name,position:n+1,optionValues:t.optionValues.map((t=>({id:Number(t.id.split("/").pop()),defaultName:t.name})))})));return{id:Number(t.id.split("/").pop()),options:n}},Q=async(t,n,e=200)=>(await D({storefrontAccessToken:t,query:"\n      query mediaImages($mediaImageIds: [ID!]!, $size: Int!) {\n        nodes(ids: $mediaImageIds) {\n          ... on MediaImage {\n            id\n            image {\n              url(transform: { maxWidth: $size, maxHeight: $size })\n            }\n          }\n        }\n      }\n    ",variables:{mediaImageIds:n,size:e}})).nodes.filter(Boolean).map((t=>({gid:t.id,url:t.image.url}))),L=async(t,n)=>{const e=n.dealBars.map((t=>t.mediaImageGID)).filter((t=>null!=t)).filter((t=>!t.includes("placeholder")));if(!e.length)return[];return await Q(t,e,300)},z=async(t,n)=>{const e=n.dealBars.map((({freeGifts:t})=>(t||[]).map((t=>t.mediaImageGID)))).reduce(((t,n)=>t.concat(n)),[]).filter((t=>null!=t)).filter((t=>!t.includes("placeholder")));if(!e.length)return[];return await Q(t,e,300)},K=async(t,n)=>{const e=n.dealBars.map((({upsells:t})=>(t||[]).map((t=>t.mediaImageGID)))).reduce(((t,n)=>t.concat(n)),[]).filter((t=>null!=t));if(!e.length)return[];return await Q(t,e,300)},H=async(t,n)=>{if(!n.swatchOptions)return[];const e=n.swatchOptions.reduce(((t,n)=>[...t,...n.images.map((t=>t.mediaImageGID)).filter((t=>null!=t))]),[]);if(!e.length)return[];return await Q(t,e)},W=async(t,n)=>{if(!n.collectionBreaksEnabled||!n.collectionBreaks)return[];const e=n.collectionBreaks.mediaImageGID;if(!e)return[];return await Q(t,[e])},X=async(t,n,e)=>{var i;if(!t)return;if(0===n.length)return;const o=Z(e);if(0===o.length)return;const s=n.map((t=>t.id)),r=null==(i=o.find((t=>t.localization)))?void 0:i.localization;try{const e=await(async(t,n,e)=>{const i=n.map((t=>`gid://shopify/Product/${t}`));let o="";return e&&(o=`@inContext(country: ${e.country}, language: ${e.language})`),(await D({storefrontAccessToken:t,query:`\n      query($productGIDs: [ID!]!) ${o} {\n        nodes(ids: $productGIDs) {\n          ... on Product {\n            id\n            options {\n              name\n              optionValues {\n                id\n                name\n              }\n            }\n          }\n        }\n        localization {\n          country {\n            isoCode\n          }\n          language {\n            isoCode\n          }\n        }\n      }\n    `,variables:{productGIDs:i}})).nodes.filter((t=>null!=t)).map(R)})(t,s,r);for(const t of n){const n=e.find((n=>n.id===t.id));n&&Y(t,n)}}catch(a){console.error("[Kaching Bundles] Failed to fetch swatches",a),setTimeout((()=>{throw a}),0)}},Z=t=>t.map((t=>t.swatchOptions||[])).reduce(((t,n)=>t.concat(n)),[]).filter((t=>null!=t)).filter((t=>"default"!==t.swatchType)),Y=(t,n)=>{for(const e of n.options){const n=t.options.find((t=>t.position===e.position));if(n){n.defaultName=e.defaultName;for(const t of e.optionValues){const e=n.optionValues.find((n=>n.id===t.id));e&&(e.defaultName=t.defaultName)}}}},tt=window;class nt{constructor(t,n,e,i,o,s,r,a,c){this.I=[],this.P=null,this.S=!1,l("DealBlock",{dealBlockElement:t,cartForm:n,addToCartButton:e,quantityInput:i,variantPicker:o,globalConfig:s,translations:r,dealBlockSettings:a,product:c}),this.C=t,this.t=n,this.T=e,this.q=i,this.N=o,this.A=s,this.$=r,this.V=a,this.i=c,this.F=this.i.selectedVariantId||this.i.variants[0].id,this.O=n&&new j(n,c,!i,!!a.dealBars.some((t=>"subscription"===t.dealBarType)),!!a.abTestVariantNumber),this.B()}updateVariantPicker(t){this.N=t}updateAddToCartButton(t){this.T=t,this.j()}updateQuantityInput(t){this.q=t,this.D()}B(){y(this.C,"config",JSON.stringify(this.A)),y(this.C,"translations",JSON.stringify(this.$)),y(this.C,"deal-block",JSON.stringify(this.V)),y(this.C,"product",JSON.stringify(this.i)),y(this.C,"current-variant-id",String(this.F)),this.G(),this.J(),this.U(),this.t&&(this.T||"119a01-bf.myshopify.com"===window.Shopify.shop)&&this.M()}async G(){const t=await(async(t,n)=>{const[e,i,o,s,r]=await Promise.all([L(t,n),z(t,n),K(t,n),H(t,n),W(t,n)]);return[...e,...i,...o,...s,...r]})(this.A.storefrontAccessToken,this.V);y(this.C,"media-images",JSON.stringify(t))}async J(){const t=this.V.dealBars.map((({freeGifts:t})=>t?t.map((t=>t.productGID)):[])).reduce(((t,n)=>t.concat(n)),[]).filter((t=>null!=t)),n=this.V.dealBars.map((({upsells:t})=>t?t.map((t=>t.productGID)):[])).reduce(((t,n)=>t.concat(n)),[]).filter((t=>null!=t)),e=this.V.dealBars.map((({bundleProducts:t})=>t?t.map((t=>t.productGID)):[])).reduce(((t,n)=>t.concat(n)),[]).filter((t=>null!=t)).filter((t=>"default"!==t)),i=Array.from(new Set([...t,...n,...e]));if(!i.length)return;const o=await G({storefrontAccessToken:this.A.storefrontAccessToken,country:window.Shopify.country,language:window.Shopify.locale.split("-")[0].toUpperCase(),productIds:i.map((t=>Number(t.split("/").pop()))),removeUnavailableVariants:!0});await X(this.A.storefrontAccessToken,o,[this.V]),y(this.C,"other-products",JSON.stringify(o))}async U(){const t=this.V.collectionBreaks;if(!this.V.collectionBreaksEnabled||!t)return;const n=(t.excludedProducts||[]).map((({id:t})=>t)),e=(t.selectedProducts||[]).map((({id:t})=>t)),i=(t.selectedCollections||[]).map((({id:t})=>t));let o=await(async({storefrontAccessToken:t,country:n,language:e,blockVisibility:i,excludedProductGIDs:o,selectedProductGIDs:s,selectedCollectionGIDs:r})=>{const a=250;switch(i){case"selected-products":return s.slice(0,a);case"all-products":case"excluded-products":{let s=(await D({storefrontAccessToken:t,query:`\n          query($limit: Int!) @inContext(country: ${n}, language: ${e}) {\n            products(first: $limit) {\n              nodes {\n                id\n              }\n            }\n          }\n        `,variables:{limit:a}})).products.nodes.map((t=>t.id));return"excluded-products"===i&&(s=s.filter((t=>!o.includes(t)))),s}case"selected-collections":return(await D({storefrontAccessToken:t,query:"\n          query($collectionGIDs: [ID!]!, $limit: Int!) {\n            nodes(ids: $collectionGIDs) {\n              ... on Collection {\n                products(first: $limit) {\n                  nodes {\n                    id\n                  }\n                }\n              }\n            }\n          }\n        ",variables:{collectionGIDs:r,limit:a}})).nodes.flatMap((t=>t.products.nodes.map((t=>t.id)))).splice(0,a)}})({storefrontAccessToken:this.A.storefrontAccessToken,country:window.Shopify.country,language:window.Shopify.locale.split("-")[0].toUpperCase(),blockVisibility:t.visibility,excludedProductGIDs:n,selectedProductGIDs:e,selectedCollectionGIDs:i});o=o.slice(0,250);let s=await G({storefrontAccessToken:this.A.storefrontAccessToken,country:window.Shopify.country,language:window.Shopify.locale.split("-")[0].toUpperCase(),productIds:o.map((t=>Number(t.split("/").pop())))});s=s.filter((t=>t.availableForSale)),await X(this.A.storefrontAccessToken,s,[this.V]),setTimeout((()=>{s.length>0&&(s.map((t=>t.id)).includes(this.i.id)||a("collection_breaks_without_main_product",{count:s.length}))})),setTimeout((()=>{this.R(s)}),1e3),y(this.C,"collection-breaks-products",JSON.stringify(s))}R(t){for(const n of t){const t=n.variants[0].image||n.image;if(t){(new Image).src=t}}}M(){this.L(),this.K(),this.H(),this.D(),this.W(),this.X(),this.Z(),window.kachingBundlesDisableAddToCartHandling||this.j()}L(){d(),m(tt,"locationchange",(()=>{const t=new URLSearchParams(tt.location.search).get("variant");t&&this.Y(Number(t))}))}K(){const t=p('input[name="id"]',this.t);t&&h(t,"value",((t,n)=>{l("_listenForVariantIdInputChange",[t,n]),t!==n&&n&&this.Y(Number(n))}))}H(){const t=p('select[name="id"]',this.t);if(!t)return;let n;window.setInterval((()=>{const e=t.value;n!==e&&e&&(l("_listenForVariantIdSelectChange",[n,e]),n=e,this.Y(Number(e)))}),100)}Y(t){l("handleNativeVariantChange",{variantId:t,currentVariantId:this.F}),t!=this.F&&(this.F=t,this.C.dataset.nativeVariantChangeInProgress&&!this.A.featureFlags.remove_variant_change_delay||window.kachingBundlesBlockVariantChangeInProgress?l("handleNativeVariantChange","skipping"):(this.C.dataset.nativeVariantChangeInProgress="true",setTimeout((()=>{delete this.C.dataset.nativeVariantChangeInProgress}),500),this.i.variants.find((n=>n.id==t))&&y(this.C,"current-variant-id",String(t))))}D(){this.q&&(m(this.q,"change",(()=>{const t=Number(this.q.value);l("_listenForQuantityInputChange change",t),this.tt(t)})),h(this.q,"value",((t,n)=>{t!==n&&(l("_listenForQuantityInputChange observe",[t,n]),this.tt(Number(n)))})))}tt(t){window.kachingBundlesQuantityChangeInProgress||(!this.A.keepQuantityInput||window.kachingBundlesBlockVariantChangeInProgress||this.C.dataset.nativeVariantChangeInProgress?this.nt():this.A.keepQuantityInput&&y(this.C,"quantity",String(t)))}nt(){if(!this.q||0===this.I.length)return;window.kachingBundlesQuantityChangeInProgress=!0;const t=this.I.filter((t=>this.et(t)));let n=t.reduce(((t,n)=>t+n.quantity),0);const e=this.O.currentVariantId();n=(t.find((({id:t})=>t==e))||t[0]).quantity,l("_updateQuantityInput",n),this.q.value=String(n),"119a01-bf.myshopify.com"===window.Shopify.shop&&this.q.dispatchEvent(new Event("input",{bubbles:!0})),this.q.dispatchEvent(new Event("change",{bubbles:!0})),setTimeout((()=>{delete window.kachingBundlesQuantityChangeInProgress}),100)}W(){this.N&&m(this.C,"variant-selected",(t=>{const{variantId:n}=t.detail;l("listenForBlockVariantSelect",n),this.it(n)}))}X(){m(this.C,"variants-changed",(t=>{var n;clearTimeout(this.ot);const{formattedPrice:e,preselected:i}=t.detail;this.A.featureFlags.remove_variant_change_delay||this.st(),this.I=this.C.items(),l("listenForBlockVariantsChange",{items:this.I,formattedPrice:e,preselected:i});const o=this.I.filter((t=>this.et(t))),s=o.find((t=>t.id==this.O.currentVariantId()))||o[0];this.O.update(s),this.nt(),null==(n=this.T)||n.updatePrice(e),i&&setTimeout((()=>{var t;return null==(t=this.T)?void 0:t.updatePrice(e)}),300),this.rt(),i&&(this.ot=setTimeout((()=>{this.nt(),delete this.ot}),1e3))}))}Z(){m(this.C,"deal-bar-selected",(t=>{var n;const{dealBarId:e,variantIds:i,preselected:o}=t.detail;if(l("_listenForDealBarSelect",{dealBarId:e,variantIds:i,preselected:o}),this.P=e,this.N&&(null==(n=this.V.defaultVariantsV2)?void 0:n.length)){const t=i[0];t&&this.it(t)}}))}it(t){const n=this.i.variants.find((n=>n.id==t));if(l("_changeCurrentVariant",{variantId:t,currentVariantId:this.F,imageId:n.imageId}),this.F!=t){this.F=t,this.st();for(const[t,e]of n.options.entries()){const i=this.i.options[t],o=i.name,s=i.optionValues.find((t=>t.name===e)).id;this.N.select(t+1,s,o,e,this.i.id,n.id)}}}st(){clearTimeout(window.kachingBundlesBlockVariantChangeInProgress),window.kachingBundlesBlockVariantChangeInProgress=setTimeout((()=>{delete window.kachingBundlesBlockVariantChangeInProgress}),1e3)}j(){if(!this.T)return;this.T.onClickIfConditionMet((()=>!window.kachingBundlesDisableAddToCartHandling&&(!!this.V.skipCart||(!!this.ct()||this.I.length>1))),(async()=>{if(this.V.skipCart)return await this.ut(),window.kachingCartApi&&(l("Kaching Cart update tiered promotions bar"),await window.kachingCartApi.updateTieredPromotionsBar()),void(window.location.href=P("checkout"));if(this.ct()){try{window.upcartOpenCart&&window.upcartOpenCart()}catch(t){console.error("upcartOpenCart error",t)}return await this.ut(),void(window.upcartRefreshCart&&window.upcartRefreshCart())}return this.lt()}),(()=>this.V.skipCart||this.ct())),this.dt()}dt(){window.upcartShouldSkipAddToCartInterceptor=!0;const t=window.upcartShouldSkipAddToCart;window.upcartShouldSkipAddToCart=n=>{if("function"==typeof t){if(!0===t(n))return!0}return n.includes("kaching_bundles=true")}}ct(){return!!p("#UpcartPopup")||!!window.upcartDocumentOrShadowRoot}async lt(){l("addItemsExceptCurrentToCart",this.I);const t=this.O.currentVariantId(),n=this.I.filter((n=>!this.et(n)||n.id!=t));await this.ht({items:n,partial:!0})}async ut(){l("addAllItemsToCart",this.I);let t=this.I;0===t.length&&(t=[{id:this.O.currentVariantId(),quantity:1,properties:{}}]),await this.ht({items:t})}ft(){const t=f('[name^="properties"]').map((t=>[t.name.match(/properties\[(.*)\]/)[1],t.value])).filter((([t])=>"__kaching_bundles"!==t));return Object.fromEntries(t)}et(t){const n=this.wt(t);return!n||(n.main||!1)}wt(t){if(!t.properties.__kaching_bundles)return null;return JSON.parse(t.properties.__kaching_bundles)}async ht({items:t,partial:n=!1}){const e=this.ft(),i=t.map((t=>{var n;return this.et(t)||(null==(n=this.wt(t))?void 0:n.collectionBreaksProduct)?{...t,properties:{...e,...t.properties}}:t}));setTimeout((()=>this.yt(e)));const o={kaching_bundles:"true"};n&&(o.partial="true");const s={"Content-Type":"application/json"};n||(s["X-Kaching-Cart-Ignore"]="1"),await fetch(P("cart/add.js",o),{method:"POST",body:JSON.stringify({items:i}),headers:s})}yt(t){if(!this.V.collectionBreaksEnabled)return;const n=Object.fromEntries(Object.entries(t).filter((([t])=>!t.startsWith("__kaching_"))));0!==Object.keys(n).length&&a("collection_break_properties",{properties:n})}rt(){const t="kaching-bundles-form--different-variants-selected";this.I.length>1?this.t.classList.add(t):this.t.classList.remove(t)}}class et{static find(t,n){let e=t.parentElement;for(;e;){if(n){const t=f(n,e);if(t.length>0)return new et(t)}const t=p(["variant-selects","variant-radios","variant-picker","product-variants","gp-product-variants",".gf_variants-wrapper",'[data-pf-type="ProductVariantSwatches"]',".product-selectors",".product-block-variant-picker"].join(", "),e);if(t)return new et([t]);let i=f([".selector-wrapper",".radio-wrapper",".variant-wrapper","div[data-product-option]",".pp-variant-picker"].join(", "),e);if(["28212b.myshopify.com","9bd9ad.myshopify.com"].includes(window.Shopify.shop)&&(i=f(".selector-wrapper, .radio-wrapper, .variant-wrapper, .select-wrapper, div[data-product-option]",e)),i.length>0){const t=i.filter((t=>!i.some((n=>n!==t&&n.contains(t)))));return new et(t)}e=e.parentElement}return null}constructor(t){this._t=t}elements(){return this._t}hide(){for(const t of this._t)t.style.display="none",t.parentElement.classList.add("kaching-bundles--variant-selects-hidden")}select(t,n,e,i,o,s){l("VariantPicker#select",[t,n,e,i]),this.bt(t,n,e,i,o)||this.gt(t,e,i)||this.vt(s)}bt(t,n,e,i,o){const s=this._t.map((t=>[...t.querySelectorAll("input")])).flat();let r=s.filter((n=>[e,`${e}-${t}`,`options[${e}]`,`option${t}`,`option-${o}-${t-1}`].includes(n.name.trim())));r.length||(r=s.filter((n=>!!n.dataset.optionPosition&&Number(n.dataset.optionPosition)===t))),r.length||(r=s.filter((t=>"radio"===t.type)));const a=r.find((t=>t.value==i||t.value===String(n)));return!!a&&(l("VariantPicker#_clickRadioInput",a),a.click(),!0)}gt(t,n,e){const i=this._t.map((t=>[...t.querySelectorAll("select")])).flat().find((e=>!![`options[${n}]`,`option${t}`].includes(e.name)||(e.dataset.index===`option${t}`||(e.dataset.optionName===n||(e.id==="SingleOptionSelector-product-"+(t-1)||e.id===`p-variant-dropdown-${t}`)))));if(!i)return!1;return!![...i.options].find((t=>t.value==e))&&(l("VariantPicker#_setSelectValue",{variantSelect:i,optionValue:e}),i.value=e,i.dispatchEvent(new Event("change",{bubbles:!0})),!0)}vt(t){const n=this._t.map((t=>[...t.querySelectorAll("select")])).flat().find((n=>[...n.options].find((n=>Number(n.value)===t))));return!!n&&(l("VariantPicker#_setSelectVariantId",{variantSelect:n,variantId:t}),n.value=String(t),n.dispatchEvent(new Event("change",{bubbles:!0})),!0)}}class it{constructor(t){this.kt=!1,this.It=!1,this.element=t}onClickIfConditionMet(t,n,e){this.element.addEventListener("click",(async i=>{const o=t(),s=e();l("AddToCartButton#interceptClick",{conditionMet:o,preventDefault:s,submitInProgress:this.kt,ignoreClick:this.It}),o&&(this.kt?this.kt=!1:this.It||(this.kt=!0,this.It=!0,this.element.disabled=!0,setTimeout((()=>{this.It=!1}),1e3),i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),await n(),this.element.disabled=!1,s?this.kt=!1:(await new Promise((t=>setTimeout(t,200))),this.element.click())))}),!0)}updatePrice(t){const n=this.Pt(this.element);n&&(n.innerHTML=t)}Pt(t){if(!t.childNodes.length)return null;const n=t.childNodes[0].nodeValue;if(n&&n.match(/\d/)&&!n.match(/[a-zA-Z]{4}/))return t;for(const e of t.childNodes){const t=this.Pt(e);if(t)return t}return null}}const ot=['[data-pf-type^="ProductATC"]',"button.gp-button-atc","gp-product-button button","x-buy-button",'button[type="submit"]','input[type="submit"]'],st=['form[action*="/cart/add"]',"form[data-instant-form-product-url]"],rt=()=>{"visualPreviewInitialLoad"!==new URLSearchParams(window.location.search).get("source")&&console.log('%c‚ùó [Kaching Bundles] Please add "Add to cart" button to the page template',"color: white; font-weight: bold; background: linear-gradient(90deg, #8181d7, #93e9e5); padding: 5px 8px; border-radius: 3px;")};class at{constructor(t,n,e,i,o){this.q=null,this.N=null,this.T=null,this.A=n,this.$=e,this.V=i,t.innerHTML='<kaching-bundles-block class="kaching-bundles"></kaching-bundles-block>',_(t).initialized="true",this.C=p("kaching-bundles-block",t),this.t=this.St(),this.Ct(),this.Tt(),this.qt(),this.Nt(),this.At(),this.$t(),this.Vt(),this.xt=new nt(this.C,this.t,this.T,this.q,this.N,n,e,i,o)}qt(){const t=this.Ft();t||rt();const n=t&&new it(t);this.T=n}Ft(){if(!this.t)return null;if(this.A.customSelectors.addToCartButton){const t=p(this.A.customSelectors.addToCartButton,this.t);if(t)return t}const t=[];for(const e of ot){const n=f(e,this.t);t.push(...n)}const n=k(this.C,t);return n||this.t.querySelector("button")}Nt(){this.T&&S(this.T.element,(()=>{var t;this.qt(),l("observeAddToCartButtonRemoval found new add to cart button",this.T),a("add_to_cart_button_removed",{recreated:!!this.T,theme:null==(t=window.Shopify.theme)?void 0:t.schema_name},.01),this.xt.updateAddToCartButton(this.T),this.Nt()}))}At(){const t=et.find(this.C,this.A.customSelectors.variantPicker);t&&(this.V.hideVariantPicker&&t.hide(),this.N=t)}$t(){this.N&&S(this.N.elements()[0],(()=>{var t;this.At(),l("observeVariantPickerRemoval found new variant picker",this.N),a("variant_picker_removed",{recreated:!!this.N,theme:null==(t=window.Shopify.theme)?void 0:t.schema_name},.01),this.xt.updateVariantPicker(this.N),this.$t()}))}St(){let t=this.C.parentElement;for(;t;){for(const n of st)for(const e of[...ot,"button"]){const i=p(`${n} ${e}`,t);if(i)return i.closest(n)}t=t.parentElement}if("119a01-bf.myshopify.com"===window.Shopify.shop)for(t=this.C.parentElement;t;){if(t.matches(st[0]))return t;t=t.parentElement}return null}Ct(){const t=this.Ot(),n=k(this.C,t,6);if(!n)return;this.A.keepQuantityInput||(n.style.display="none");const e=n.matches("input")?n:n.querySelector("input");this.q=e}Tt(){this.q&&S(this.q,(()=>{var t;this.Ct(),l("observeQuantityInputRemoval found new quantity input",this.q),a("quantity_input_removed",{recreated:!!this.q,theme:null==(t=window.Shopify.theme)?void 0:t.schema_name},.01),this.xt.updateQuantityInput(this.q),this.Tt()}))}Ot(){const t=this.A.customSelectors.quantity;if(t){const n=f(t);if(n.length)return n}for(const[n,e]of C){if(!e)continue;const t=f(e);if(t.length)return t}return f(".product-form__quantity")}Vt(){const t=setInterval((()=>{(void 0!==window.FastClick||void 0!==window.T4SThemeSP&&void 0!==window.T4SThemeSP.FastClick||void 0!==window.BEEThemeSP&&void 0!==window.BEEThemeSP.FastClick)&&(clearInterval(t),f("*",this.C).forEach((t=>{return e="needsclick",(n=t)&&n.classList.add(e);var n,e})))}),500)}}class ct{constructor(t){this.A=t,setTimeout((()=>{const t=document.querySelector('link[href*="kaching-bundles-block.css"]');t&&S(t,(()=>{var t;a("css_removed",{theme:null==(t=window.Shopify.theme)?void 0:t.schema_name},.01)}))}),100)}init(){this.Bt();const t=f("kaching-bundle, kaching-bundle-deals");this.jt(t),0===t.length&&this.Dt(),this.Et(),this.A.abTestsRunning&&(async()=>{try{N();const t=A();await F()!==t&&await O(t)}catch(t){if(!(t instanceof T))throw t;console.error(t)}})()}Bt(){const t=(b("script#kaching-bundles-translations")||[]).find((t=>t.locale===this.A.locale));this.$=null==t?void 0:t.translations}jt(t){const n=b("script.kaching-bundles-product");if(n)for(const e of t)e.getAttribute("product-id")||e.setAttribute("product-id",n.id)}Dt(){if(!p("script.kaching-bundles-deal-block-settings"))return;const t=this.Gt();if(!t.length)return void rt();const n=b("script.kaching-bundles-product"),e=n&&n.id||this.A.productId;for(const i of t){const t=w("kaching-bundle");t.setAttribute("product-id",e),i.parentElement.insertBefore(t,i)}}async Et(){var t,n;const e=[...f("kaching-bundle, kaching-bundle-deals")].filter((t=>t.getAttribute("product-id")));l("_initializePlaceholders",e);if(0===e.filter((t=>!_(t).initialized)).length)return;const i=await this.Jt(e);l("placeholdersData",i);const o=Array.from(i.values()).map((({dealBlock:t})=>t)).filter((t=>null!=t)),s=Array.from(i.values()).map((({product:t})=>t)).filter((t=>null!=t));await X(this.A.storefrontAccessToken,s,o);const a=A();for(const c of e){const e=Number(c.getAttribute("product-id")),{product:o,dealBlock:s}=i.get(e);if(!o||!s)continue;setTimeout((()=>{r(this.A.shopifyDomain,s.id,e,s.abTestVariantId,a)}),2e3);const u={...{...this.A.defaultTranslations,...null==(t=this.$)?void 0:t.system},...null==(n=this.$)?void 0:n.dealBlocks[s.id]};new at(c,this.A,u,s,o)}}async Jt(t){var n;const e=t.map((t=>Number(t.getAttribute("product-id")))),i=this.A.locale===this.A.liquidLocale?[...f("script.kaching-bundles-product")]:[],o=new Map(i.map((t=>{const n=Number(_(t).productId),e=JSON.parse(t.textContent);return 250===e.variants.length?null:[n,e]})).filter((t=>null!==t))),s=e.filter((t=>!o.has(t))),r=[...f("script.kaching-bundles-deal-block-settings")],a=new Map;for(const f of e){const t=r.filter((t=>Number(_(t).productId)===f));t.length&&a.set(f,t.map((t=>t.textContent?JSON.parse(t.textContent):null)))}const c=e.filter((t=>!a.has(t))),u=s.length>0&&this.A.storefrontAccessToken?G({storefrontAccessToken:this.A.storefrontAccessToken,country:window.Shopify.country,language:window.Shopify.locale.split("-")[0].toUpperCase(),productIds:s,includeSellingPlans:this.A.accessScopes.includes("unauthenticated_read_selling_plans")}):[],l=c.length>0&&this.A.storefrontAccessToken?(async t=>{var n;const e=null==(n=(await D({storefrontAccessToken:t,query:'\n      {\n        shop {\n          metafield(namespace: "$app:kaching_bundles", key: "deal_blocks") {\n            value\n          }\n        }\n      }\n    '})).shop.metafield)?void 0:n.value;return e?JSON.parse(e):[]})(this.A.storefrontAccessToken):[],[d,h]=await Promise.all([u,l]),p=new Map(s.map((t=>[t,d.find((n=>n.id==t))]))),m=new Map([...o,...p]),w=A(),y=new Map;for(const f of e){const t=m.get(f);if(!t)continue;const e=(null==(n=a.get(f))?void 0:n.filter((t=>t)))||h;let i=this.Ut(e,t);i=i.filter((t=>!t.marketId||t.marketId===this.A.marketId)),i=i.filter((t=>{if(!t.abTestVariantId)return!0;const n=B(w,t.abTestVariantsCount);return t.abTestVariantNumber===n})),i.length?y.set(f,{product:t,dealBlock:i[0]}):y.set(f,{product:t,dealBlock:null})}return y}Ut(t,n){const e=[],i=t.filter((t=>"selected-products"===t.blockVisibility));for(const a of i)a.selectedProductIds.map(Number).includes(n.id)&&e.push(a);const o=t.filter((t=>"selected-collections"===t.blockVisibility));for(const a of o)n.collectionIds.some((t=>a.selectedCollectionIds.map(Number).includes(t)))&&e.push(a);const s=t.filter((t=>"excluded-products"===t.blockVisibility));for(const a of s)a.excludedProductIds.map(Number).includes(n.id)||(a.excludedCollectionIds||[]).some((t=>n.collectionIds.includes(t)))||e.push(a);const r=t.filter((t=>"all-products"===t.blockVisibility));for(const a of r)e.push(a);return e}Gt(){const t=this.Mt();if(t)return[t];const n=this.Rt();if(n)return[n];const e=this.Qt();return e?[e]:[]}Mt(){const t=f("gp-product-button");for(const n of t)if(!n.closest("gp-sticky"))return n;return null}Rt(){for(const t of C){const n=p(t[0]);if(n){if(n.closest(".dbtfy-sticky-addtocart, .cart-drawer"))continue;return setTimeout((()=>{var e;const i=n.closest('[class*="cart"], [class*="Cart"]');i&&"body"!==i.tagName.toLowerCase()&&(i.classList.toString().includes("add-to-cart")||i.classList.toString().includes("AddToCart")||i.classList.toString().includes("icartShopifyCartContent")||a("theme_position_in_cart_drawer_v8",{selector:t[0],classes:i.classList.toString(),theme:null==(e=window.Shopify.theme)?void 0:e.schema_name},.01))})),n}}return null}Qt(){for(const t of st)for(const n of[...ot,"button"]){const e=p(`${t} ${n}`);if(e)return e.parentElement}return null}}const ut=t=>{var n;801===(null==(n=window.Shopify.theme)?void 0:n.theme_store_id)?setTimeout((()=>new ct(t).init()),100):new ct(t).init()},lt=()=>{if(void 0===e&&(e="off"===n()),e){const t=f("style#kaching-bundles-custom-css");for(const n of t)n.remove();return}o()&&(l("App version",(()=>{const t=document.currentScript;if(!t)return null;const n=t.src.match(/\/([^/]+)\/assets\//);return n&&n[1]?n[1]:null})()),l("Shopify domain",window.Shopify.shop));const t=b("script#kaching-bundles-config");if(!t)return;u();const i=window.Shopify.currency;t.currencyRate=i?Number(i.rate):1,t.locale=window.Shopify.locale||t.liquidLocale,ut(t),window.Shopify.designMode&&m(window,"shopify:section:load",(()=>{ut(t)})),(()=>{const t=/\b__kaching_/,n=["script","style"],e=e=>{const i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:t=>{const e=t.parentElement;return!e||n.includes(e.tagName.toLowerCase())?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}});let o;for(;o=i.nextNode();){const n=o.textContent||"";if(t.test(n)){const t=o.parentElement;if(t.classList.contains("properties-key-value-key"))continue;if("dt"===t.tagName.toLowerCase()){const n=t.nextElementSibling;"dd"===(null==n?void 0:n.tagName.toLowerCase())&&(n.style.display="none")}t.style.display="none",a("kaching_property_hidden",{text:n,element:t.tagName},.01)}}};new MutationObserver((t=>{for(const n of t)for(const t of n.addedNodes)t.nodeType===Node.ELEMENT_NODE&&e(t)})).observe(document.body,{childList:!0,subtree:!0}),e(document.body)})(),(()=>{const t=document.querySelector('link[href*="kaching-bundles-block.css"]');if(!t)return;const n=t.closest('div[data-block-type="liquid"]');n&&(n.dataset.blockType="liquid-kaching-fix")})()};window.kachingBundlesDisableAutoInitialize||lt(),window.kachingBundlesInitialize=lt}();
